<!-- Encabezado de la página de detalle de mascota -->
<ion-header class="header">
  <ion-toolbar class="header">
    <ion-buttons
      (click)="volverAHome()"
      class="volver-button"
      fill="clear"
      slot="start"
    >
      <ion-back-button></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <!-- foto de perfil de la mascota -->
  <div class="mascota-foto-container" *ngIf="mascota?.fotoUrl">
    <img
      [src]="mascota?.fotoUrl"
      alt="Foto de la mascota"
      class="mascota-foto"
    />
  </div>

  <div class="profile-operations">
    <!-- Nombre de la mascota -->
    <h2 class="mascota-nombre">{{ (mascota?.nombre || '') |capitalize }}</h2>
    <!-- Botón para editar datos de la mascota -->
    <ion-button
      expand="block"
      (click)="editarMascota()"
      fill="clear"
      class="editar-button"
    >
      Editar
    </ion-button>
  </div>

  <!-- Datos en cards -->
  <div class="mascota-datos-cards">
    <div class="dato-card">
      <ion-icon name="calendar-outline"></ion-icon>
      <div class="dato-label">Edad</div>
      <div class="dato-valor">
        {{ calcularEdad(mascota?.fechaNacimiento || '') }}
      </div>
    </div>
    <div class="dato-card">
      <ion-icon name="male-female-outline"></ion-icon>
      <div class="dato-label">Sexo</div>
      <div class="dato-valor">{{ mascota?.sexo }}</div>
    </div>
    <div class="dato-card">
      <ion-icon name="barbell-outline"></ion-icon>
      <div class="dato-label">Peso</div>
      <div class="dato-valor">{{ mascota?.peso }} kg</div>
    </div>
    <div class="dato-card">
      <ion-icon name="document-outline"></ion-icon>
      <div class="dato-label">Ficha</div>
      <div class="dato-valor">{{ mascota?.fichaNumero }}</div>
    </div>
  </div>

  <!-- Acciones: Archivos médicos y Síntomas -->
  <div class="pet-detail-actions ion-margin-bottom">
    <ion-button
      expand="block"
      (click)="abrirModalArchivos()"
      fill="clear"
      class="archivos-button"
    >
      Archivos médicos
    </ion-button>
    <ion-button
      expand="block"
      class="sintomas-button"
      fill="clear"
      (click)="abrirModalSintomas()"
    >
      Síntomas
    </ion-button>
  </div>

  <!-- Sección de elementos recientes -->
  <ion-card class="recientes-card">
    <ion-card-header>
      <ion-card-title class="recientes-title">Recientes</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        <ion-item *ngFor="let item of recientes">
          <ion-label>
            <ng-container *ngIf="item.tipo === 'documento'; else sintomaTpl">
              <strong>Documento:</strong> {{ item.nombre }}<br />
              <small>{{ item.fecha | date:'short' }}</small>
            </ng-container>
            <ng-template #sintomaTpl>
              <strong>Síntoma:</strong> {{ item.descripcion | slice:0:30 }}<br />
              <small>{{ item.fecha | date:'short' }}</small>
            </ng-template>
          </ion-label>
          <ion-button
            *ngIf="item.tipo === 'documento'"
            fill="clear"
            (click)="abrirPDF(item.url)"
          >
            Ver PDF
          </ion-button>
        </ion-item>
      </ion-list>
      <ion-text *ngIf="recientes.length === 0">
        <p>No hay registros recientes.</p>
      </ion-text>
    </ion-card-content>
  </ion-card>

  <!-- Botón para eliminar la mascota -->
  <div class="eliminar-container">
    <ion-button
      expand="block"
      fill="clear"
      class="eliminar-button"
      (click)="confirmarEliminarMascota()"
    >
      Eliminar mascota
    </ion-button>
  </div>

  <!-- Input oculto para seleccionar PDF -->
  <input
    #pdfInput
    type="file"
    accept="application/pdf"
    style="display: none"
    (change)="onPDFSelected($event)"
  />
</ion-content>
