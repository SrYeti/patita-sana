<!-- Encabezado de la página de detalle de mascota -->
<ion-header class="header">
  <ion-toolbar class="header">
    <ion-title>Detalle de Mascota</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <!-- Foto de perfil redonda -->
  <div class="mascota-foto-container" *ngIf="mascota?.fotoUrl">
    <img
      [src]="mascota?.fotoUrl"
      alt="Foto de la mascota"
      class="mascota-foto"
    />
  </div>

  <!-- Nombre de la mascota -->
  <h2 class="mascota-nombre">{{ (mascota?.nombre || '') |capitalize }}</h2>

  <div class="profile-operations">
    <ion-button
      expand="block"
      fill="clear"
      (click)="volverAHome()"
      class="volver-button"
    >
      Volver
    </ion-button>
    <!-- Botón para editar datos de la mascota -->
    <ion-button
      expand="block"
      (click)="editarMascota()"
      fill="clear"
      class="editar-button"
    >
      Editar datos
    </ion-button>
  </div>

  <!-- Datos en tabla -->
  <table class="mascota-datos" *ngIf="mascota">
    <tr>
      <td>Edad:</td>
      <td>{{ calcularEdad(mascota.fechaNacimiento) }}</td>
    </tr>
    <tr>
      <td>Sexo:</td>
      <td>{{ mascota.sexo }}</td>
    </tr>
    <tr>
      <td>Peso:</td>
      <td>{{ mascota.peso }} kg</td>
    </tr>
    <tr>
      <td>N° ficha:</td>
      <td>{{ mascota.fichaNumero }}</td>
    </tr>
  </table>

  <!-- Acciones: Archivos médicos y Síntomas -->
  <div class="pet-detail-actions ion-margin-bottom">
    <ion-button
      expand="block"
      (click)="abrirModalArchivos()"
      fill="clear"
      class="archivos-button"
    >
      Archivos médicos
    </ion-button>
    <ion-button
      expand="block"
      class="sintomas-button"
      fill="clear"
      (click)="abrirModalSintomas()"
    >
      Síntomas
    </ion-button>
  </div>

  <!-- Sección de elementos recientes -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>Recientes</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        <ion-item *ngFor="let item of recientes">
          <ion-label>
            <ng-container *ngIf="item.tipo === 'documento'; else sintomaTpl">
              <strong>Documento:</strong> {{ item.nombre }}<br />
              <small>{{ item.fecha | date:'short' }}</small>
            </ng-container>
            <ng-template #sintomaTpl>
              <strong>Síntoma:</strong> {{ item.descripcion | slice:0:30 }}<br />
              <small>{{ item.fecha | date:'short' }}</small>
            </ng-template>
          </ion-label>
          <ion-button
            *ngIf="item.tipo === 'documento'"
            fill="clear"
            (click)="abrirPDF(item.url)"
          >
            Ver PDF
          </ion-button>
        </ion-item>
      </ion-list>
      <ion-text *ngIf="recientes.length === 0">
        <p>No hay registros recientes.</p>
      </ion-text>
    </ion-card-content>
  </ion-card>

  <!-- Botón para eliminar la mascota -->
  <ion-button
    expand="block"
    fill="clear"
    class="eliminar-button"
    (click)="confirmarEliminarMascota()"
  >
    Eliminar mascota
  </ion-button>

  <!-- Input oculto para seleccionar PDF -->
  <input
    #pdfInput
    type="file"
    accept="application/pdf"
    style="display: none"
    (change)="onPDFSelected($event)"
  />
</ion-content>
